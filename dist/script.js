(()=>{var u=class{constructor(e){let s=e.querySelector(".types__list"),i=[...s.querySelectorAll(".types__item")];if(i.length<2)return;let t=i.slice(0,3);t.length===2&&t.push(t[0]),t=t.map(o=>{let c=o.cloneNode(!0);return c.classList.remove("types__item_visible"),c.setAttribute("aria-hidden","true"),c}),s.append(...t),this.parent=s,this.els=i,this.clones=t,this.elWidth=0,this.currentEl=0,this.forceScroll=0,this.scrollTo=null,this.swipeMode=!1,e.querySelector(".types__prev").addEventListener("click",o=>{o.preventDefault(),this.scrollBtn(!1)}),e.querySelector(".types__next").addEventListener("click",o=>{o.preventDefault(),this.scrollBtn(!0)}),s.addEventListener("scroll",()=>this.handleScroll(),{passive:!0}),s.addEventListener("touchstart",()=>{this.swipeMode=!0},{passive:!0}),s.addEventListener("touchend",()=>{this.swipeMode=!1,this.waitScrollToEl()},{passive:!0}),window.addEventListener("resize",()=>this.handleResize(),{passive:!0}),this.handleResize(),this.changeItems(0)}handleResize(){this.elWidth=this.els[0].getBoundingClientRect().width,this.parent.scroll(this.currentEl*this.elWidth+1,0)}changeItems(e){this.currentEl===0?this.parent.scroll(this.elWidth*this.els.length+e,0):this.currentEl>this.els.length&&this.parent.scroll(e-this.elWidth*(this.currentEl-1),0)}changeClasses(e){let s=e%this.els.length;this.els[s].classList.remove("types__item_visible"),s<3&&this.clones[s].classList.remove("types__item_visible");let i=this.currentEl%this.els.length;this.els[i].classList.add("types__item_visible"),i<3&&this.clones[i].classList.add("types__item_visible")}handleScroll(){let e=this.parent.scrollLeft,s=this.currentEl;if(this.forceScroll>0){this.waitScrollToEl();return}let i=e/this.elWidth,t=Math.floor(i);i-t<.45?this.currentEl=t:i-t>.55&&(this.currentEl=t+1),s!==this.currentEl&&(this.changeClasses(s),this.changeItems(e)),this.swipeMode||this.waitScrollToEl()}waitScrollToEl(){clearTimeout(this.scrollTo),this.swipeMode||(this.scrollTo=setTimeout(()=>this.scrollToEl(),200))}scrollToEl(){if(this.forceScroll>1){this.forceScroll-=1;return}this.scrollTo=null;let e=this.elWidth*this.currentEl+1;if(Math.round(e)===Math.round(this.parent.scrollLeft)){this.forceScroll=0;return}this.isScrollingToEl=!0,this.parent.scroll({left:e,behavior:"smooth"})}scrollBtn(e){let s=this.currentEl;this.forceScroll+=1,e?this.currentEl===this.els.length?(this.currentEl=1,this.parent.scroll(1,0)):(this.currentEl+=1,this.parent.scroll(this.elWidth*s+1,0)):this.currentEl===0?(this.currentEl=this.els.length-1,this.parent.scroll(this.elWidth*this.els.length+1,0)):(this.currentEl-=1,this.parent.scroll(this.elWidth*s+1,0)),this.changeClasses(s),this.scrollToEl()}},v=u;var a=class{constructor(e,{timeInterval:s=1e4,alwaysSlide:i=!1,ignoreEvents:t=!1,touchMinDistance:r=50,touchDebounce:n=250}={}){this.isPlayingEnabled=!1,this.timeInterval=s,this.currentIdx=0,this.slideTimeout=null,this.paused=!1,this.touchMinDistance=r,this.touchDebounce=n,this.alwaysSlide=i,this.ignoreEvents=t,this.itemEls=[...e.querySelectorAll(".bikes__link")],this.dotEls=[...e.querySelectorAll(".bikes__dot")],this.carouselEl=e,this.itemWrapEl=e.querySelector(".bikes__list"),this.dotsWrapEl=e.querySelector(".bikes__dots"),this.initElementsEvents(),this.initKeyboardMouseEvents(),this.initTouchEvents()}initElementsEvents(){this.itemWrapEl.addEventListener("focusin",()=>this.handlePause(),{passive:!0}),this.itemWrapEl.addEventListener("focusout",()=>this.handleResume(),{passive:!0}),this.itemWrapEl.addEventListener("animationend",({target:e})=>{a.removeAnimationClasses(e)},{passive:!0}),this.dotsWrapEl.addEventListener("click",e=>this.handleDotClick(e))}initKeyboardMouseEvents(){this.carouselEl.addEventListener("mouseover",()=>this.handlePause(),{passive:!0}),this.carouselEl.addEventListener("mouseout",()=>this.handleResume(),{passive:!0})}initTouchEvents(){let e=0,s=!1,i=performance.now();this.itemWrapEl.addEventListener("touchstart",t=>{this.ignoreEvents||(this.paused=!0,s=!1,e=t.changedTouches[0].screenX)},{passive:!0}),this.itemWrapEl.addEventListener("touchend",()=>{this.ignoreEvents||(s&&(i=performance.now()),this.paused=!1)},{passive:!0}),this.itemWrapEl.addEventListener("touchmove",t=>{if(this.ignoreEvents||s||performance.now()-i<this.touchDebounce)return;let r=t.changedTouches[0].screenX;Math.abs(r-e)>this.touchMinDistance&&(r<e?this.showNextSlider(!0):this.showPrevSlider(!0),s=!0)},{passive:!0})}handleDotClick(e){let{target:s}=e,i=this.dotEls.indexOf(s.closest(".bikes__dot"));if(i===-1)return;e.preventDefault();let t=0;this.alwaysSlide&&(t=1,i<this.currentIdx&&(t=-t)),this.showSliderAt(i,t)}handlePause(){this.paused=!0}handleResume(){this.paused=!1}static removeAnimationClasses(e){e.classList.remove("bikes__link_animation_hide","bikes__link_animation_slide-left","bikes__link_animation_slide-right")}showSliderAt(e,s){if(this.currentIdx===e)return;let i=this.currentIdx;this.currentIdx=e,this.itemEls.forEach((n,o)=>{a.removeAnimationClasses(n),o===e?n.classList.add("bikes__link_active"):n.classList.remove("bikes__link_active")}),this.dotEls[i].classList.remove("bikes__dot_active"),this.dotEls[e].classList.add("bikes__dot_active");let t;s===0?t="bikes__link_animation_hide":s>0?t="bikes__link_animation_slide-left":t="bikes__link_animation_slide-right",this.itemEls[i].classList.add(t),this.isPlayingEnabled&&this.restartTimer()}restartTimer(){clearTimeout(this.slideTimeout),this.slideTimeout=setTimeout(()=>this.rotateSlide(),this.timeInterval)}rotateSlide(){if(!this.isPlayingEnabled){this.slideTimeout=null;return}this.paused?this.restartTimer():this.showNextSlider()}showPrevSlider(e=this.alwaysSlide){let s=this.currentIdx-1;s<0&&(s=this.itemEls.length-1),this.showSliderAt(s,e?-1:0)}showNextSlider(e=this.alwaysSlide){let s=this.currentIdx+1;s>=this.itemEls.length&&(s=0),this.showSliderAt(s,e?1:0)}reset(){let e=this.itemWrapEl.querySelector(".bikes__link_active"),s=this.itemEls.indexOf(e);this.currentIdx=s;let i=this.dotsWrapEl.querySelector(".bikes__dot_active");i&&i.classList.remove("bikes__dot_active"),this.dotEls[s].classList.add("bikes__dot_active")}start(){if(window.matchMedia("(prefers-reduced-motion: reduce)").matches){this.isPlayingEnabled=!1;return}this.isPlayingEnabled=!0,this.restartTimer()}stop(){this.isPlayingEnabled=!1,this.itemEls.forEach(e=>{a.removeAnimationClasses(e)})}};var L=()=>{let l=[...document.querySelectorAll(".theme-switch__button")],e=(t,r)=>{r?(t.setAttribute("aria-pressed","true"),t.classList.add("theme-switch__button_pressed")):(t.setAttribute("aria-pressed","false"),t.classList.remove("theme-switch__button_pressed"))},s=({target:t})=>{let r=t.classList.contains("theme-switch__button_pressed");e(t,!r),r?localStorage.setItem("theme","light"):localStorage.setItem("theme","dark"),window[Symbol.for("updateTheme")]()},i=()=>{let t=document.querySelector(":root").getAttribute("data-theme")==="dark";l.forEach(r=>{e(r,t)})};window.matchMedia("(prefers-color-scheme: dark)").onchange=i,i(),l.forEach(t=>{t.addEventListener("click",s)})},f=L;var T=()=>{let l=document.querySelector(".header__hamburger"),e=document.querySelector(".header__menu"),s=document.querySelector(".header__close"),i=document.querySelector(".header__nav-list");l.addEventListener("click",t=>{t.preventDefault(),e.classList.add("header__menu_visible")}),s.addEventListener("click",t=>{t.preventDefault(),e.classList.remove("header__menu_visible")}),i.addEventListener("click",()=>{e.classList.remove("header__menu_visible")})},g=T;var x=()=>{let l=document.querySelector(".footer__form");l.addEventListener("submit",e=>{e.preventDefault(),l.reset(),l.classList.add("footer__form_visible-message"),setTimeout(()=>l.classList.remove("footer__form_visible-message"),2e3),document.activeElement.blur()})},E=x;var D={highway:[{image:"images/bikes/cervelo-caledonia-5.jpg",name:"Cervelo Caledonia-5",url:"https://www.sigmasports.com/item/Cervelo/Caledonia-5-Ultegra-Disc-Road-Bike-2021/RDEN"},{image:"images/bikes/cannondale-systemsix-himod.jpg",name:"Cannondale Systemsix Himod",url:"https://www.sigmasports.com/item/Cannondale/SystemSix-HiMOD-Ultegra-Di2-Disc-Road-Bike-2021/R82J"},{image:"images/bikes/trek-domane-sl-7.jpg",name:"Trek Domane SL-7",url:"https://www.sigmasports.com/item/Trek/Domane-SL-7-Force-eTap-AXS-Disc-Road-Bike-2021/RULF"}],gravel:[{image:"images/bikes/cervelo-aspero-grx-810.jpg",name:"Cervelo Aspero GRX 810",url:"https://www.sigmasports.com/item/Cervelo/Aspero-GRX-810-1x-Disc-Gravel-Bike-2021/RJDE"},{image:"images/bikes/specialized-s-works-diverge.jpg",name:"Specialized S-Works Diverge",url:"https://www.sigmasports.com/item/Specialized/S-Works-Diverge-Gravel-Bike-2020/NVJ9"},{image:"images/bikes/cannondale-topstone-lefty-3.jpg",name:"Cannondale Topstone Lefty 3",url:"https://www.sigmasports.com/item/Cannondale/Topstone-Carbon-Lefty-3-Disc-Gravel-Road-Bike-2021/PUC8"}],tt:[{image:"images/bikes/specialized-s-works-shiv.jpg",name:"Specialized S-Works Shiv",url:"https://www.sigmasports.com/item/Specialized/S-Works-Shiv-Disc-Limited-Edition-Triathlon-Bike-2019/K8P9 "},{image:"images/bikes/bmv-timemachine-01-one.jpg",name:"BMC Timemachine 01 ONE",url:"https://www.sigmasports.com/item/BMC/Timemachine-01-One-Force-Disc-TT-Triathlon-Bike-2021/S835"},{image:"images/bikes/cervelo-p-series.jpg",name:"Cervelo P-Series",url:"https://www.sigmasports.com/item/Cervelo/P-Series-Ultegra-Di2-TT-Triathlon-Bike-2021/RM6Q"}]},C=()=>{let l=document.querySelector(".bikes__types-wrap"),e=[...document.querySelectorAll(".bikes__types-item")],s=[...document.querySelectorAll(".bikes__item")];e.forEach(i=>{i.addEventListener("click",t=>{t.preventDefault();let r=t.target.closest(".bikes__types-item");if(!r.classList.contains("bikes__types-item_active")){let n=document.querySelector(".bikes__types-item_active");n&&n.classList.remove("bikes__types-item_active"),r.classList.add("bikes__types-item_active"),l.setAttribute("style","pointer-events: none;"),setTimeout(()=>l.removeAttribute("style"),20);let o=r.getAttribute("data-name"),c=D[o];s.forEach((m,w)=>{let d=c[w],_=m.querySelector(".bikes__image"),b=m.querySelector(".bikes__link"),y=m.querySelector(".bikes__name");_.src=d.image,_.alt=d.name.toLowerCase(),b.href=d.url,y.textContent=d.name})}})})},k=C;var p=class{constructor(){this.sizes=[],this.cbs=[],this.prevBigger=[],this.eventInited=!1,this.lastCheckedSize=0}handleEvent(){let e=window.innerWidth,s=Math.min(this.lastCheckedSize,e),i=Math.max(this.lastCheckedSize,e);this.sizes.forEach((t,r)=>{if(t>=s&&t<=i){let n=e>t;n!==this.prevBigger[r]&&(this.cbs[r].forEach(o=>{o(n)}),this.prevBigger[r]=n)}}),this.lastCheckedSize=e}addListener(e,s,i=!0){let t=window.innerWidth>e,r=this.sizes.indexOf(e);r!==-1?this.cbs[r].push(s):(this.sizes.push(e),this.cbs.push([s]),this.prevBigger.push(t)),this.eventInited||(this.eventInited=!0,this.lastCheckedSize=window.innerWidth,window.addEventListener("resize",this,{passive:!0})),i&&s(t)}},S=new p;var G=new v(document.querySelector(".types")),h=new a(document.querySelector(".bikes__carousel"));S.addListener(576,l=>{l?(h.stop(),h.ignoreEvents=!0):(h.start(),h.ignoreEvents=!1)});h.start();f();g();E();k();})();
